import{f as ee,a as Y}from"../chunks/CrtxcvJP.js";import{v as P,w as be,x as _e,y as ge,z as pe,A as he,e as _,B as re,N as xe,C as ye,h as C,D as ke,F as Se,G as we,L as Ee,I as Ce,q as ae,J as te,K as l,M as b,O as X,P as s,Q as Te,R as c,S as Ae,T as g,U as f}from"../chunks/CnJWyv6Z.js";import{e as E,s as x}from"../chunks/DZfYBeQt.js";import{i as Le}from"../chunks/W1EpAAu9.js";function oe(e,r,a=!1){if(e.multiple){if(r==null)return;if(!ge(r))return pe();for(var o of e.options)o.selected=r.includes(S(o));return}for(o of e.options){var t=S(o);if(he(t,r)){o.selected=!0;return}}(!a||r!==void 0)&&(e.selectedIndex=-1)}function Ne(e){var r=new MutationObserver(()=>{oe(e,e.__value)});r.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),_e(()=>{r.disconnect()})}function Me(e,r,a=r){var o=new WeakSet,t=!0;P(e,"change",n=>{var m=n?"[selected]":":checked",v;if(e.multiple)v=[].map.call(e.querySelectorAll(m),S);else{var i=e.querySelector(m)??e.querySelector("option:not([disabled])");v=i&&S(i)}a(v),_!==null&&o.add(_)}),be(()=>{var n=r();if(e===document.activeElement){var m=re??_;if(o.has(m))return}if(oe(e,n,t),t&&n===void 0){var v=e.querySelector(":checked");v!==null&&(n=S(v),a(n))}e.__value=n,t=!1}),Ne(e)}function S(e){return"__value"in e?e.__value:e.value}const Oe=Symbol("is custom element"),ze=Symbol("is html");function $e(e){if(C){var r=!1,a=()=>{if(!r){if(r=!0,e.hasAttribute("value")){var o=e.value;j(e,"value",null),e.value=o}if(e.hasAttribute("checked")){var t=e.checked;j(e,"checked",null),e.checked=t}}};e.__on_r=a,Se(a),we()}}function j(e,r,a,o){var t=Ie(e);C&&(t[r]=e.getAttribute(r),r==="src"||r==="srcset"||r==="href"&&e.nodeName==="LINK")||t[r]!==(t[r]=a)&&(r==="loading"&&(e[Ee]=a),a==null?e.removeAttribute(r):typeof a!="string"&&qe(e).includes(r)?e[r]=a:e.setAttribute(r,a))}function Ie(e){return e.__attributes??={[Oe]:e.nodeName.includes("-"),[ze]:e.namespaceURI===xe}}var Z=new Map;function qe(e){var r=e.getAttribute("is")||e.nodeName,a=Z.get(r);if(a)return a;Z.set(r,a=[]);for(var o,t=e,n=Element.prototype;n!==t;){o=ke(t);for(var m in o)o[m].set&&a.push(m);t=ye(t)}return a}function je(e,r,a=r){var o=new WeakSet;P(e,"input",async t=>{var n=t?e.defaultValue:e.value;if(n=I(e)?q(n):n,a(n),_!==null&&o.add(_),await Ce(),n!==(n=r())){var m=e.selectionStart,v=e.selectionEnd,i=e.value.length;if(e.value=n??"",v!==null){var p=e.value.length;m===v&&v===i&&p>i?(e.selectionStart=p,e.selectionEnd=p):(e.selectionStart=m,e.selectionEnd=Math.min(v,p))}}}),(C&&e.defaultValue!==e.value||ae(r)==null&&e.value)&&(a(I(e)?q(e.value):e.value),_!==null&&o.add(_)),te(()=>{var t=r();if(e===document.activeElement){var n=re??_;if(o.has(n))return}I(e)&&t===q(e.value)||e.type==="date"&&!t&&!e.value||t!==e.value&&(e.value=t??"")})}function Pe(e,r,a=r){P(e,"change",o=>{var t=o?e.defaultChecked:e.checked;a(t)}),(C&&e.defaultChecked!==e.checked||ae(r)==null)&&a(e.checked),te(()=>{var o=r();e.checked=!!o})}function I(e){var r=e.type;return r==="number"||r==="range"}function q(e){return e===""?null:+e}var Fe=ee('<div class="bg-card border border-border rounded-lg p-4"><div class="text-sm text-muted-foreground mb-1">RÃ©sumÃ© gÃ©nÃ©rÃ© :</div> <p class="text-foreground text-lg"> </p></div>'),Ge=ee(`<main class="min-h-screen flex items-center justify-center p-4 bg-background"><div class="w-full max-w-4xl space-y-6"><div class="text-center space-y-2"><h1 class="text-4xl font-bold text-foreground">D4G Summarizer by Thomas, Malo, Aubin</h1> <p class="text-muted-foreground">Summarize your text under 4000 characters</p></div> <div class="bg-card border border-border rounded-xl p-6 space-y-4"><div class="relative"><textarea class="w-full h-64 p-4 border border-border rounded-lg resize-none
                        focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none
                        text-foreground placeholder:text-muted-foreground" style="background-color: rgb(var(--color-card));" placeholder="Paste your text here..."></textarea> <div class="absolute bottom-4 right-4 text-sm font-mono text-muted-foreground"> </div></div> <div class="flex flex-wrap gap-4 items-center justify-between pt-4 border-t border-border"><div class="flex flex-wrap gap-4 items-center"><select class="border border-border rounded-lg px-4 py-2 text-foreground outline-none focus:ring-2 focus:ring-primary/50" style="background-color: rgb(var(--color-card));"><option>ğŸ‡«ğŸ‡· French</option><option>ğŸ‡¬ğŸ‡§ English</option></select> <label class="flex items-center gap-2 cursor-pointer"><input type="checkbox" class="w-5 h-5 rounded-full border border-gray-400 accent-green-500 cursor-pointer transition-all duration-200 focus:ring-2 focus:ring-green-400"/> <span class="text-sm text-muted-foreground">Optimiser</span></label></div> <div class="flex gap-3"><button class="px-5 py-2 rounded-lg font-medium bg-secondary text-foreground border border-border hover:bg-green-700">Clean</button> <button class="px-6 py-2 rounded-lg font-medium bg-primary text-primary-foreground hover:bg-green-700 disabled:opacity-50"> </button> <button class="px-6 py-2 rounded-lg font-medium bg-accent text-accent-foreground hover:bg-green-700 disabled:opacity-50"> </button></div></div></div> <!> <div class="grid grid-cols-2 gap-4"><div class="bg-card border border-border rounded-lg p-4"><div class="text-sm text-muted-foreground mb-1">Consumption</div> <div class="text-2xl font-bold text-foreground"> </div></div> <div class="bg-card border border-border rounded-lg p-4"><div class="text-sm text-muted-foreground mb-1">Latency</div> <div class="text-2xl font-bold text-foreground"> </div></div></div></div></main>`);function Ue(e){let r=g("");const a=4e3;let o=g(!1),t=g("fr"),n=g(0),m=g(0),v=g(""),i=g(!1);function p(u){const d=u.target;f(r,d.value,!0)}async function se(){if(!(!s(r)||s(i))){f(i,!0);try{const d=await(await fetch("/summarize",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({textToSum:s(r),optimized:s(o)})})).json();d.success?(f(v,d.results.summary,!0),f(m,d.results.latency,!0),f(n,d.results.energy_wh?Number(d.results.energy_wh.toFixed(6)):0,!0)):alert(`Erreur: ${d.error}`)}catch(u){console.error(u),alert("Erreur serveur, impossible de gÃ©nÃ©rer le rÃ©sumÃ©")}finally{f(i,!1)}}}async function ne(){if(!(!s(r)||s(i))){f(i,!0);try{const d=await(await fetch("/compare",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({textToSum:s(r)})})).json();d.success?alert(`Comparaison OptimisÃ© vs Non-optimisÃ© :

OptimisÃ©:
${d.comparison.optimized.summary}

Non-optimisÃ©:
${d.comparison.non_optimized.summary}

Gains : Latence ${d.comparison.performance_gains.latency_reduction_percent}% / Ã‰nergie ${d.comparison.performance_gains.energy_reduction_percent}%`):alert(`Erreur: ${d.error}`)}catch(u){console.error(u),alert("Erreur serveur, impossible de comparer les modÃ¨les")}finally{f(i,!1)}}}function ie(){f(r,""),f(v,""),f(m,0),f(n,0)}var T=Ge(),F=l(T),A=b(l(F),2),L=l(A),h=l(L);Te(h),j(h,"maxlength",a);var G=b(h,2),de=l(G);c(G),c(L);var R=b(L,2),N=l(R),y=l(N),M=l(y);M.value=M.__value="fr";var B=b(M);B.value=B.__value="en",c(y);var D=b(y,2),O=l(D);$e(O),Ae(2),c(D),c(N);var J=b(N,2),z=l(J),k=b(z,2),le=l(k,!0);c(k);var w=b(k,2),ce=l(w,!0);c(w),c(J),c(R),c(A);var U=b(A,2);{var ue=u=>{var d=Fe(),Q=b(l(d),2),me=l(Q,!0);c(Q),c(d),X(()=>x(me,s(v))),Y(u,d)};Le(U,u=>{s(v)&&u(ue)})}var W=b(U,2),$=l(W),H=b(l($),2),ve=l(H);c(H),c($);var K=b($,2),V=b(l(K),2),fe=l(V);c(V),c(K),c(W),c(F),c(T),X(()=>{h.disabled=s(i),x(de,`${s(r).length??""}/4000`),y.disabled=s(i),O.disabled=s(i),z.disabled=s(i),k.disabled=s(r).length===0||s(i),x(le,s(i)?"Loading...":"Summarize"),w.disabled=s(r).length===0||s(i),x(ce,s(i)?"Loading...":"Compare Models"),x(ve,`${s(n)??""} Wh`),x(fe,`${s(m)??""} ms`)}),je(h,()=>s(r),u=>f(r,u)),E("input",h,p),Me(y,()=>s(t),u=>f(t,u)),Pe(O,()=>s(o),u=>f(o,u)),E("click",z,ie),E("click",k,se),E("click",w,ne),Y(e,T)}export{Ue as component};
