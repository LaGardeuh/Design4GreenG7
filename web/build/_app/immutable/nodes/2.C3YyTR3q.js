import{f as Q,a as K}from"../chunks/BmUku4eP.js";import{N as He,v as Ke,h as T,w as Re,x as Ue,y as Ve,L as Ye,z as ye,A as Qe,q as we,B as ke,e as S,C as Xe,D as R,F as a,G as o,I as n,J as Ze,K as d,M as er,O as p,P as t}from"../chunks/DHBm8Qtv.js";import{e as L,s as m}from"../chunks/cqRR3rXU.js";import{i as ge}from"../chunks/DOmdNB8k.js";const rr=Symbol("is custom element"),tr=Symbol("is html");function ar(e){if(T){var r=!1,i=()=>{if(!r){if(r=!0,e.hasAttribute("value")){var v=e.value;Y(e,"value",null),e.value=v}if(e.hasAttribute("checked")){var l=e.checked;Y(e,"checked",null),e.checked=l}}};e.__on_r=i,Ue(i),Ve()}}function Y(e,r,i,v){var l=or(e);T&&(l[r]=e.getAttribute(r),r==="src"||r==="srcset"||r==="href"&&e.nodeName==="LINK")||l[r]!==(l[r]=i)&&(r==="loading"&&(e[Ye]=i),i==null?e.removeAttribute(r):typeof i!="string"&&dr(e).includes(r)?e[r]=i:e.setAttribute(r,i))}function or(e){return e.__attributes??={[rr]:e.nodeName.includes("-"),[tr]:e.namespaceURI===He}}var he=new Map;function dr(e){var r=e.getAttribute("is")||e.nodeName,i=he.get(r);if(i)return i;he.set(r,i=[]);for(var v,l=e,b=Element.prototype;b!==l;){v=Re(l);for(var f in v)v[f].set&&i.push(f);l=Ke(l)}return i}function sr(e,r,i=r){var v=new WeakSet;ye(e,"input",async l=>{var b=l?e.defaultValue:e.value;if(b=U(e)?V(b):b,i(b),S!==null&&v.add(S),await Qe(),b!==(b=r())){var f=e.selectionStart,u=e.selectionEnd,x=e.value.length;if(e.value=b??"",u!==null){var _=e.value.length;f===u&&u===x&&_>x?(e.selectionStart=_,e.selectionEnd=_):(e.selectionStart=f,e.selectionEnd=Math.min(u,_))}}}),(T&&e.defaultValue!==e.value||we(r)==null&&e.value)&&(i(U(e)?V(e.value):e.value),S!==null&&v.add(S)),ke(()=>{var l=r();if(e===document.activeElement){var b=Xe??S;if(v.has(b))return}U(e)&&l===V(e.value)||e.type==="date"&&!l&&!e.value||l!==e.value&&(e.value=l??"")})}function nr(e,r,i=r){ye(e,"change",v=>{var l=v?e.defaultChecked:e.checked;i(l)}),(T&&e.defaultChecked!==e.checked||we(r)==null)&&i(e.checked),ke(()=>{var v=r();e.checked=!!v})}function U(e){var r=e.type;return r==="number"||r==="range"}function V(e){return e===""?null:+e}var ir=Q('<div class="bg-card border border-border rounded-lg p-4"><div class="text-sm text-muted-foreground mb-1">Generated summary:</div> <p class="text-foreground text-lg whitespace-pre-wrap"> </p></div>'),lr=Q('<div class="bg-card border border-border rounded-xl p-6 space-y-6 mt-6"><h2 class="text-2xl font-semibold text-center text-foreground">Model Comparison</h2> <div class="grid md:grid-cols-2 gap-4"><div class="bg-muted/20 border border-border rounded-lg p-4"><div class="text-sm text-muted-foreground mb-1 font-medium">Non Optimized</div> <p class="text-foreground text-base whitespace-pre-wrap leading-relaxed"> </p></div> <div class="bg-muted/20 border border-border rounded-lg p-4"><div class="text-sm text-muted-foreground mb-1 font-medium">Optimized</div> <p class="text-foreground text-base whitespace-pre-wrap leading-relaxed"> </p></div></div> <div class="overflow-x-auto"><table class="w-full border border-border rounded-lg text-sm text-foreground"><thead class="bg-muted text-muted-foreground uppercase tracking-wide"><tr><th class="border border-border p-2 text-left">Metric</th><th class="border border-border p-2 text-center">Non Optimized</th><th class="border border-border p-2 text-center">Optimized</th><th class="border border-border p-2 text-center text-green-500">Gain</th></tr></thead><tbody><tr><td class="border border-border p-2">Latency (ms)</td><td class="border border-border p-2 text-center"> </td><td class="border border-border p-2 text-center"> </td><td class="border border-border p-2 text-center text-green-500"> </td></tr><tr><td class="border border-border p-2">Energy (Wh)</td><td class="border border-border p-2 text-center">—</td><td class="border border-border p-2 text-center">—</td><td class="border border-border p-2 text-center text-green-500"> </td></tr><tr><td class="border border-border p-2">Word count</td><td class="border border-border p-2 text-center"> </td><td class="border border-border p-2 text-center"> </td><td class="border border-border p-2 text-center text-green-500"> </td></tr></tbody></table></div></div>'),cr=Q(`<main class="min-h-screen flex items-center justify-center p-4 bg-background"><div class="w-full max-w-4xl space-y-6"><div class="text-center space-y-2"><h1 class="text-4xl font-bold text-foreground">D4G Summarizer by Thomas, Malo, Aubin</h1> <p class="text-muted-foreground">Summarize your text under 4000 characters</p></div> <div class="bg-card border border-border rounded-xl p-6 space-y-4"><div class="relative"><textarea class="w-full h-64 p-4 border border-border rounded-lg resize-none
                    focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none
                    text-foreground placeholder:text-muted-foreground" style="background-color: rgb(var(--color-card));" placeholder="Paste your text here..."></textarea> <div class="absolute bottom-4 right-4 text-sm font-mono text-muted-foreground"> </div></div> <div class="flex flex-wrap gap-4 items-center justify-between pt-4 border-t border-border"><div class="flex flex-wrap gap-4 items-center"><label class="flex items-center gap-2 cursor-pointer"><input type="checkbox" class="hidden peer"/> <span class="w-5 h-5 rounded-full border border-gray-500 flex items-center justify-center
                            peer-checked:bg-green-500 peer-checked:border-green-500 transition-all duration-200"><svg class="w-3 h-3 text-white opacity-0 peer-checked:opacity-100 transition-opacity" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="3"><path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7"></path></svg></span> <span class="text-sm text-muted-foreground">Optimiser</span></label></div> <div class="flex gap-3"><button class="px-5 py-2 rounded-lg font-medium bg-green-700 text-white hover:bg-green-800 transition-colors">Clean</button> <button class="px-6 py-2 rounded-lg font-medium bg-green-600 text-white hover:bg-green-700 disabled:opacity-50 transition-colors"> </button> <button class="px-6 py-2 rounded-lg font-medium bg-green-500 text-white hover:bg-green-600 disabled:opacity-50 transition-colors"> </button></div></div></div> <!> <!> <div class="grid grid-cols-2 gap-4"><div class="bg-card border border-border rounded-lg p-4"><div class="text-sm text-muted-foreground mb-1">Consumption</div> <div class="text-2xl font-bold text-foreground"> </div></div> <div class="bg-card border border-border rounded-lg p-4"><div class="text-sm text-muted-foreground mb-1">Latency</div> <div class="text-2xl font-bold text-foreground"> </div></div></div></div></main>`);function pr(e){let r=p("");const i=4e3;let v=p(!1),l=p(0),b=p(0),f=p(""),u=p(!1),x=p(""),_=p(""),O=p(0),C=p(0),E=p(0),M=p(0),h=p(0),g=p(0);function ze(c){const s=c.target;t(r,s.value,!0)}async function Se(){if(!(!a(r)||a(u))){t(u,!0);try{const s=await(await fetch("/summarize",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({textToSum:a(r),optimized:a(v)})})).json();s.success?(t(f,s.results.summary,!0),t(b,s.results.latency,!0),t(l,s.results.energy_wh?Number(s.results.energy_wh.toFixed(6)):0,!0),t(x,""),t(_,""),t(O,0),t(C,0),t(E,0),t(M,0),t(h,0),t(g,0)):alert(`Erreur: ${s.error}`)}catch(c){console.error(c),alert("Erreur serveur, impossible de générer le résumé")}finally{t(u,!1)}}}async function Oe(){if(!(!a(r)||a(u))){t(u,!0);try{const s=await(await fetch("/compare",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({textToSum:a(r)})})).json();s.success?(t(x,s.comparison.optimized.summary,!0),t(_,s.comparison.non_optimized.summary,!0),t(O,s.comparison.performance_gains.latency_reduction_percent,!0),t(C,s.comparison.performance_gains.energy_reduction_percent,!0),t(E,s.comparison.performance_gains.latency_optimized_ms??s.comparison.optimized.latency??0,!0),t(M,s.comparison.performance_gains.latency_non_optimized_ms??s.comparison.non_optimized.latency??0,!0),t(h,s.comparison.optimized.word_count??0,!0),t(g,s.comparison.non_optimized.word_count??0,!0),t(f,"")):alert(`Erreur: ${s.error}`)}catch(c){console.error(c),alert("Erreur serveur, impossible de comparer les modèles")}finally{t(u,!1)}}}function Ce(){t(r,""),t(f,""),t(b,0),t(l,0),t(x,""),t(_,""),t(O,0),t(C,0),t(E,0),t(M,0),t(h,0),t(g,0)}var A=cr(),X=o(A),j=n(o(X),2),$=o(j),y=o($);Ze(y),Y(y,"maxlength",i);var Z=n(y,2),Ee=o(Z);d(Z),d($);var ee=n($,2),G=o(ee),re=o(G),I=o(re);ar(I),er(4),d(re),d(G);var te=n(G,2),P=o(te),k=n(P,2),Me=o(k,!0);d(k);var N=n(k,2),Ne=o(N,!0);d(N),d(te),d(ee),d(j);var ae=n(j,2);{var Le=c=>{var s=ir(),w=n(o(s),2),z=o(w,!0);d(w),d(s),R(()=>m(z,a(f))),K(c,s)};ge(ae,c=>{a(f)&&c(Le)})}var oe=n(ae,2);{var Te=c=>{var s=lr(),w=n(o(s),2),z=o(w),le=n(o(z),2),$e=o(le,!0);d(le),d(z);var ce=n(z,2),ve=n(o(ce),2),Ge=o(ve,!0);d(ve),d(ce),d(w);var ue=n(w,2),be=o(ue),me=n(o(be)),W=o(me),D=n(o(W)),Ie=o(D,!0);d(D);var J=n(D),Pe=o(J,!0);d(J);var pe=n(J),Be=o(pe);d(pe),d(W);var q=n(W),fe=n(o(q),3),We=o(fe);d(fe),d(q);var _e=n(q),F=n(o(_e)),De=o(F,!0);d(F);var H=n(F),Je=o(H,!0);d(H);var xe=n(H),qe=o(xe);d(xe),d(_e),d(me),d(be),d(ue),d(s),R(Fe=>{m($e,a(_)),m(Ge,a(x)),m(Ie,a(M)),m(Pe,a(E)),m(Be,`-${a(O)??""}%`),m(We,`-${a(C)??""}%`),m(De,a(g)),m(Je,a(h)),m(qe,`${Fe??""}%`)},[()=>a(g)&&a(h)?Math.round((a(g)-a(h))/a(g)*100):0]),K(c,s)};ge(oe,c=>{(a(x)||a(_))&&c(Te)})}var de=n(oe,2),B=o(de),se=n(o(B),2),Ae=o(se);d(se),d(B);var ne=n(B,2),ie=n(o(ne),2),je=o(ie);d(ie),d(ne),d(de),d(X),d(A),R(()=>{y.disabled=a(u),m(Ee,`${a(r).length??""}/4000`),I.disabled=a(u),P.disabled=a(u),k.disabled=a(r).length===0||a(u),m(Me,a(u)?"Loading...":"Summarize"),N.disabled=a(r).length===0||a(u),m(Ne,a(u)?"Loading...":"Compare Models"),m(Ae,`${a(l)??""} Wh`),m(je,`${a(b)??""} ms`)}),sr(y,()=>a(r),c=>t(r,c)),L("input",y,ze),nr(I,()=>a(v),c=>t(v,c)),L("click",P,Ce),L("click",k,Se),L("click",N,Oe),K(e,A)}export{pr as component};
