import{f as Y,a as H}from"../chunks/BmUku4eP.js";import{N as Je,v as qe,h as A,w as Fe,x as He,y as Ke,L as Re,z as he,A as Ue,q as ye,B as we,e as k,C as Ve,D as K,F as d,G as a,I as i,J as Ye,K as o,M as Qe,O as f,P as t,t as Xe}from"../chunks/DHBm8Qtv.js";import{e as T,s as g}from"../chunks/cqRR3rXU.js";import{i as _e}from"../chunks/DOmdNB8k.js";const Ze=Symbol("is custom element"),er=Symbol("is html");function rr(e){if(A){var r=!1,n=()=>{if(!r){if(r=!0,e.hasAttribute("value")){var v=e.value;V(e,"value",null),e.value=v}if(e.hasAttribute("checked")){var l=e.checked;V(e,"checked",null),e.checked=l}}};e.__on_r=n,He(n),Ke()}}function V(e,r,n,v){var l=tr(e);A&&(l[r]=e.getAttribute(r),r==="src"||r==="srcset"||r==="href"&&e.nodeName==="LINK")||l[r]!==(l[r]=n)&&(r==="loading"&&(e[Re]=n),n==null?e.removeAttribute(r):typeof n!="string"&&ar(e).includes(r)?e[r]=n:e.setAttribute(r,n))}function tr(e){return e.__attributes??={[Ze]:e.nodeName.includes("-"),[er]:e.namespaceURI===Je}}var xe=new Map;function ar(e){var r=e.getAttribute("is")||e.nodeName,n=xe.get(r);if(n)return n;xe.set(r,n=[]);for(var v,l=e,m=Element.prototype;m!==l;){v=Fe(l);for(var p in v)v[p].set&&n.push(p);l=qe(l)}return n}function or(e,r,n=r){var v=new WeakSet;he(e,"input",async l=>{var m=l?e.defaultValue:e.value;if(m=R(e)?U(m):m,n(m),k!==null&&v.add(k),await Ue(),m!==(m=r())){var p=e.selectionStart,u=e.selectionEnd,_=e.value.length;if(e.value=m??"",u!==null){var b=e.value.length;p===u&&u===_&&b>_?(e.selectionStart=b,e.selectionEnd=b):(e.selectionStart=p,e.selectionEnd=Math.min(u,b))}}}),(A&&e.defaultValue!==e.value||ye(r)==null&&e.value)&&(n(R(e)?U(e.value):e.value),k!==null&&v.add(k)),we(()=>{var l=r();if(e===document.activeElement){var m=Ve??k;if(v.has(m))return}R(e)&&l===U(e.value)||e.type==="date"&&!l&&!e.value||l!==e.value&&(e.value=l??"")})}function dr(e,r,n=r){he(e,"change",v=>{var l=v?e.defaultChecked:e.checked;n(l)}),(A&&e.defaultChecked!==e.checked||ye(r)==null)&&n(e.checked),we(()=>{var v=r();e.checked=!!v})}function R(e){var r=e.type;return r==="number"||r==="range"}function U(e){return e===""?null:+e}var sr=Y('<div class="bg-card border border-border rounded-lg p-4"><div class="text-sm text-muted-foreground mb-1">Generated summary:</div> <p class="text-foreground text-lg whitespace-pre-wrap"> </p></div>'),ir=Y('<div class="grid md:grid-cols-2 gap-4"><div class="bg-card border border-border rounded-lg p-4"><div class="text-sm text-muted-foreground mb-1">Optimized:</div> <p class="text-foreground text-lg whitespace-pre-wrap"> </p></div> <div class="bg-card border border-border rounded-lg p-4"><div class="text-sm text-muted-foreground mb-1">Non optimized:</div> <p class="text-foreground text-lg whitespace-pre-wrap"> </p></div></div> <div class="grid grid-cols-2 gap-4 mt-4"><div class="bg-card border border-border rounded-lg p-4 text-center"><div class="text-sm text-muted-foreground mb-1">Latency gain</div> <div class="text-2xl font-bold text-green-500"> </div></div> <div class="bg-card border border-border rounded-lg p-4 text-center"><div class="text-sm text-muted-foreground mb-1">Energy gain</div> <div class="text-2xl font-bold text-green-500"> </div></div></div> <div class="grid grid-cols-2 gap-4 mt-4"><div class="bg-card border border-border rounded-lg p-4 text-center"><div class="text-sm text-muted-foreground mb-1">Latency (non optimized)</div> <div class="text-xl font-semibold text-foreground"> </div> <div class="text-sm text-muted-foreground mt-1"> </div></div> <div class="bg-card border border-border rounded-lg p-4 text-center"><div class="text-sm text-muted-foreground mb-1">Latency (optimized)</div> <div class="text-xl font-semibold text-foreground"> </div> <div class="text-sm text-muted-foreground mt-1"> </div></div></div>',1),nr=Y(`<main class="min-h-screen flex items-center justify-center p-4 bg-background"><div class="w-full max-w-4xl space-y-6"><div class="text-center space-y-2"><h1 class="text-4xl font-bold text-foreground">D4G Summarizer by Thomas, Malo, Aubin</h1> <p class="text-muted-foreground">Summarize your text under 4000 characters</p></div> <div class="bg-card border border-border rounded-xl p-6 space-y-4"><div class="relative"><textarea class="w-full h-64 p-4 border border-border rounded-lg resize-none
                        focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none
                        text-foreground placeholder:text-muted-foreground" style="background-color: rgb(var(--color-card));" placeholder="Paste your text here..."></textarea> <div class="absolute bottom-4 right-4 text-sm font-mono text-muted-foreground"> </div></div> <div class="flex flex-wrap gap-4 items-center justify-between pt-4 border-t border-border"><div class="flex flex-wrap gap-4 items-center"><label class="flex items-center gap-2 cursor-pointer"><input type="checkbox" class="hidden peer"/> <span class="w-5 h-5 rounded-full border border-gray-500 flex items-center justify-center
                            peer-checked:bg-green-500 peer-checked:border-green-500 transition-all duration-200"><svg class="w-3 h-3 text-white opacity-0 peer-checked:opacity-100 transition-opacity" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="3"><path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7"></path></svg></span> <span class="text-sm text-muted-foreground">Optimiser</span></label></div> <div class="flex gap-3"><button class="px-5 py-2 rounded-lg font-medium bg-green-700 text-white hover:bg-green-800 transition-colors">Clean</button> <button class="px-6 py-2 rounded-lg font-medium bg-green-600 text-white hover:bg-green-700 disabled:opacity-50 transition-colors"> </button> <button class="px-6 py-2 rounded-lg font-medium bg-green-500 text-white hover:bg-green-600 disabled:opacity-50 transition-colors"> </button></div></div></div> <!> <!> <div class="grid grid-cols-2 gap-4"><div class="bg-card border border-border rounded-lg p-4"><div class="text-sm text-muted-foreground mb-1">Consumption</div> <div class="text-2xl font-bold text-foreground"> </div></div> <div class="bg-card border border-border rounded-lg p-4"><div class="text-sm text-muted-foreground mb-1">Latency</div> <div class="text-2xl font-bold text-foreground"> </div></div></div></div></main>`);function mr(e){let r=f("");const n=4e3;let v=f(!1),l=f(0),m=f(0),p=f(""),u=f(!1),_=f(""),b=f(""),z=f(0),S=f(0),C=f(0),E=f(0),L=f(0),O=f(0);function ke(c){const s=c.target;t(r,s.value,!0)}async function ze(){if(!(!d(r)||d(u))){t(u,!0);try{const s=await(await fetch("/summarize",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({textToSum:d(r),optimized:d(v)})})).json();s.success?(t(p,s.results.summary,!0),t(m,s.results.latency,!0),t(l,s.results.energy_wh?Number(s.results.energy_wh.toFixed(6)):0,!0),t(_,""),t(b,""),t(z,0),t(S,0),t(C,0),t(E,0),t(L,0),t(O,0)):alert(`Erreur: ${s.error}`)}catch(c){console.error(c),alert("Erreur serveur, impossible de générer le résumé")}finally{t(u,!1)}}}async function Se(){if(!(!d(r)||d(u))){t(u,!0);try{const s=await(await fetch("/compare",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({textToSum:d(r)})})).json();s.success?(t(_,s.comparison.optimized.summary,!0),t(b,s.comparison.non_optimized.summary,!0),t(z,s.comparison.performance_gains.latency_reduction_percent,!0),t(S,s.comparison.performance_gains.energy_reduction_percent,!0),t(C,s.comparison.performance_gains.latency_optimized_ms??s.comparison.optimized.latency??0,!0),t(E,s.comparison.performance_gains.latency_non_optimized_ms??s.comparison.non_optimized.latency??0,!0),t(L,s.comparison.optimized.word_count??0,!0),t(O,s.comparison.non_optimized.word_count??0,!0),t(p,"")):alert(`Erreur: ${s.error}`)}catch(c){console.error(c),alert("Erreur serveur, impossible de comparer les modèles")}finally{t(u,!1)}}}function Ce(){t(r,""),t(p,""),t(m,0),t(l,0),t(_,""),t(b,""),t(z,0),t(S,0),t(C,0),t(E,0),t(L,0),t(O,0)}var M=nr(),Q=a(M),$=i(a(Q),2),j=a($),x=a(j);Ye(x),V(x,"maxlength",n);var X=i(x,2),Ee=a(X);o(X),o(j);var Z=i(j,2),I=a(Z),ee=a(I),G=a(ee);rr(G),Qe(4),o(ee),o(I);var re=i(I,2),P=a(re),y=i(P,2),Le=a(y,!0);o(y);var N=i(y,2),Oe=a(N,!0);o(N),o(re),o(Z),o($);var te=i($,2);{var Ne=c=>{var s=sr(),h=i(a(s),2),w=a(h,!0);o(h),o(s),K(()=>g(w,d(p))),H(c,s)};_e(te,c=>{d(p)&&c(Ne)})}var ae=i(te,2);{var Te=c=>{var s=ir(),h=Xe(s),w=a(h),ne=i(a(w),2),$e=a(ne,!0);o(ne),o(w);var le=i(w,2),ce=i(a(le),2),je=a(ce,!0);o(ce),o(le),o(h);var W=i(h,2),D=a(W),ve=i(a(D),2),Ie=a(ve);o(ve),o(D);var ue=i(D,2),me=i(a(ue),2),Ge=a(me);o(me),o(ue),o(W);var fe=i(W,2),J=a(fe),q=i(a(J),2),Pe=a(q);o(q);var ge=i(q,2),Be=a(ge);o(ge),o(J);var pe=i(J,2),F=i(a(pe),2),We=a(F);o(F);var be=i(F,2),De=a(be);o(be),o(pe),o(fe),K(()=>{g($e,d(_)),g(je,d(b)),g(Ie,`-${d(z)??""}%`),g(Ge,`-${d(S)??""}%`),g(Pe,`${d(E)??""} ms`),g(Be,`Word count: ${d(O)??""}`),g(We,`${d(C)??""} ms`),g(De,`Word count: ${d(L)??""}`)}),H(c,s)};_e(ae,c=>{(d(_)||d(b))&&c(Te)})}var oe=i(ae,2),B=a(oe),de=i(a(B),2),Ae=a(de);o(de),o(B);var se=i(B,2),ie=i(a(se),2),Me=a(ie);o(ie),o(se),o(oe),o(Q),o(M),K(()=>{x.disabled=d(u),g(Ee,`${d(r).length??""}/4000`),G.disabled=d(u),P.disabled=d(u),y.disabled=d(r).length===0||d(u),g(Le,d(u)?"Loading...":"Summarize"),N.disabled=d(r).length===0||d(u),g(Oe,d(u)?"Loading...":"Compare Models"),g(Ae,`${d(l)??""} Wh`),g(Me,`${d(m)??""} ms`)}),or(x,()=>d(r),c=>t(r,c)),T("input",x,ke),dr(G,()=>d(v),c=>t(v,c)),T("click",P,Ce),T("click",y,ze),T("click",N,Se),H(e,M)}export{mr as component};
