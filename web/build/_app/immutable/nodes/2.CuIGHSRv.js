import{f as re,a as Y}from"../chunks/BmUku4eP.js";import{N as Ze,v as er,h as j,w as rr,x as tr,y as ar,L as or,z as Se,A as dr,q as Oe,B as Ce,e as C,C as sr,D as Q,F as a,G as o,I as n,J as nr,K as d,M as ir,O as b,P as r}from"../chunks/DHBm8Qtv.js";import{e as A,s as m}from"../chunks/cqRR3rXU.js";import{i as ke}from"../chunks/DOmdNB8k.js";const lr=Symbol("is custom element"),cr=Symbol("is html");function vr(e){if(j){var t=!1,i=()=>{if(!t){if(t=!0,e.hasAttribute("value")){var v=e.value;ee(e,"value",null),e.value=v}if(e.hasAttribute("checked")){var l=e.checked;ee(e,"checked",null),e.checked=l}}};e.__on_r=i,tr(i),ar()}}function ee(e,t,i,v){var l=ur(e);j&&(l[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||l[t]!==(l[t]=i)&&(t==="loading"&&(e[or]=i),i==null?e.removeAttribute(t):typeof i!="string"&&mr(e).includes(t)?e[t]=i:e.setAttribute(t,i))}function ur(e){return e.__attributes??={[lr]:e.nodeName.includes("-"),[cr]:e.namespaceURI===Ze}}var ze=new Map;function mr(e){var t=e.getAttribute("is")||e.nodeName,i=ze.get(t);if(i)return i;ze.set(t,i=[]);for(var v,l=e,p=Element.prototype;p!==l;){v=rr(l);for(var f in v)v[f].set&&i.push(f);l=er(l)}return i}function br(e,t,i=t){var v=new WeakSet;Se(e,"input",async l=>{var p=l?e.defaultValue:e.value;if(p=X(e)?Z(p):p,i(p),C!==null&&v.add(C),await dr(),p!==(p=t())){var f=e.selectionStart,u=e.selectionEnd,g=e.value.length;if(e.value=p??"",u!==null){var _=e.value.length;f===u&&u===g&&_>g?(e.selectionStart=_,e.selectionEnd=_):(e.selectionStart=f,e.selectionEnd=Math.min(u,_))}}}),(j&&e.defaultValue!==e.value||Oe(t)==null&&e.value)&&(i(X(e)?Z(e.value):e.value),C!==null&&v.add(C)),Ce(()=>{var l=t();if(e===document.activeElement){var p=sr??C;if(v.has(p))return}X(e)&&l===Z(e.value)||e.type==="date"&&!l&&!e.value||l!==e.value&&(e.value=l??"")})}function pr(e,t,i=t){Se(e,"change",v=>{var l=v?e.defaultChecked:e.checked;i(l)}),(j&&e.defaultChecked!==e.checked||Oe(t)==null)&&i(e.checked),Ce(()=>{var v=t();e.checked=!!v})}function X(e){var t=e.type;return t==="number"||t==="range"}function Z(e){return e===""?null:+e}var fr=re('<div class="bg-card border border-border rounded-lg p-4"><div class="text-sm text-muted-foreground mb-1">Generated summary:</div> <p class="text-foreground text-lg whitespace-pre-wrap"> </p></div>'),_r=re('<div class="bg-card border border-border rounded-xl p-6 space-y-6 mt-6"><h2 class="text-2xl font-semibold text-center text-foreground">Model Comparison</h2> <div class="grid md:grid-cols-2 gap-4"><div class="bg-muted/20 border border-border rounded-lg p-4"><div class="text-sm text-muted-foreground mb-1 font-medium">Non Optimized</div> <p class="text-foreground text-base whitespace-pre-wrap leading-relaxed"> </p></div> <div class="bg-muted/20 border border-border rounded-lg p-4"><div class="text-sm text-muted-foreground mb-1 font-medium">Optimized</div> <p class="text-foreground text-base whitespace-pre-wrap leading-relaxed"> </p></div></div> <div class="overflow-x-auto"><table class="w-full border border-border rounded-lg text-sm text-foreground"><thead class="bg-muted text-muted-foreground uppercase tracking-wide"><tr><th class="border border-border p-2 text-left">Metric</th><th class="border border-border p-2 text-center">Non Optimized</th><th class="border border-border p-2 text-center">Optimized</th><th class="border border-border p-2 text-center text-green-500">Gain</th></tr></thead><tbody><tr><td class="border border-border p-2">Latency (ms)</td><td class="border border-border p-2 text-center"> </td><td class="border border-border p-2 text-center"> </td><td class="border border-border p-2 text-center text-green-500"> </td></tr><tr><td class="border border-border p-2">Energy (Wh)</td><td class="border border-border p-2 text-center"> </td><td class="border border-border p-2 text-center"> </td><td class="border border-border p-2 text-center text-green-500"> </td></tr><tr><td class="border border-border p-2">Word count</td><td class="border border-border p-2 text-center"> </td><td class="border border-border p-2 text-center"> </td><td class="border border-border p-2 text-center text-green-500"> </td></tr></tbody></table></div></div>'),gr=re(`<main class="min-h-screen flex items-center justify-center p-4 bg-background"><div class="w-full max-w-4xl space-y-6"><div class="text-center space-y-2"><h1 class="text-4xl font-bold text-foreground">D4G Summarizer by Thomas, Malo, Aubin</h1> <p class="text-muted-foreground">Summarize your text under 4000 characters</p></div> <div class="bg-card border border-border rounded-xl p-6 space-y-4"><div class="relative"><textarea class="w-full h-64 p-4 border border-border rounded-lg resize-none
                    focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none
                    text-foreground placeholder:text-muted-foreground" style="background-color: rgb(var(--color-card));" placeholder="Paste your text here..."></textarea> <div class="absolute bottom-4 right-4 text-sm font-mono text-muted-foreground"> </div></div> <div class="flex flex-wrap gap-4 items-center justify-between pt-4 border-t border-border"><div class="flex flex-wrap gap-4 items-center"><label class="flex items-center gap-2 cursor-pointer"><input type="checkbox" class="hidden peer"/> <span class="w-5 h-5 rounded-full border border-gray-500 flex items-center justify-center
                            peer-checked:bg-green-500 peer-checked:border-green-500 transition-all duration-200"><svg class="w-3 h-3 text-white opacity-0 peer-checked:opacity-100 transition-opacity" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="3"><path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7"></path></svg></span> <span class="text-sm text-muted-foreground">Optimiser</span></label></div> <div class="flex gap-3"><button class="px-5 py-2 rounded-lg font-medium bg-green-700 text-white hover:bg-green-800 transition-colors">Clean</button> <button class="px-6 py-2 rounded-lg font-medium bg-green-600 text-white hover:bg-green-700 disabled:opacity-50 transition-colors"> </button> <button class="px-6 py-2 rounded-lg font-medium bg-green-500 text-white hover:bg-green-600 disabled:opacity-50 transition-colors"> </button></div></div></div> <!> <!> <div class="grid grid-cols-2 gap-4"><div class="bg-card border border-border rounded-lg p-4"><div class="text-sm text-muted-foreground mb-1">Consumption</div> <div class="text-2xl font-bold text-foreground"> </div></div> <div class="bg-card border border-border rounded-lg p-4"><div class="text-sm text-muted-foreground mb-1">Latency</div> <div class="text-2xl font-bold text-foreground"> </div></div></div></div></main>`);function kr(e){let t=b("");const i=4e3;let v=b(!1),l=b(0),p=b(0),f=b(""),u=b(!1),g=b(""),_=b(""),N=b(0),E=b(0),M=b(0),L=b(0),h=b(0),x=b(0),k=b(0),z=b(0);function Ne(c){const s=c.target;r(t,s.value,!0)}async function Ee(){if(!(!a(t)||a(u))){r(u,!0);try{const s=await(await fetch("/summarize",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({textToSum:a(t),optimized:a(v)})})).json();s.success?(r(f,s.results.summary,!0),r(p,s.results.latency,!0),r(l,s.results.energy_wh!==void 0&&s.results.energy_wh!==null?Number(s.results.energy_wh.toFixed(6)):0,!0),r(g,""),r(_,""),r(N,0),r(E,0),r(M,0),r(L,0),r(h,0),r(x,0),r(k,0),r(z,0)):alert(`Erreur: ${s.error}`)}catch(c){console.error(c),alert("Erreur serveur, impossible de générer le résumé")}finally{r(u,!1)}}}async function Me(){if(!(!a(t)||a(u))){r(u,!0);try{const s=await(await fetch("/compare",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({textToSum:a(t)})})).json();s.success?(r(g,s.comparison.optimized.summary,!0),r(_,s.comparison.non_optimized.summary,!0),r(N,s.comparison.performance_gains.latency_reduction_percent,!0),r(E,s.comparison.performance_gains.energy_reduction_percent,!0),r(M,s.comparison.performance_gains.latency_optimized_ms??s.comparison.optimized.latency??0,!0),r(L,s.comparison.performance_gains.latency_non_optimized_ms??s.comparison.non_optimized.latency??0,!0),r(h,s.comparison.optimized.word_count??0,!0),r(x,s.comparison.non_optimized.word_count??0,!0),r(k,s.comparison.optimized.energy_wh??0,!0),r(z,s.comparison.non_optimized.energy_wh??0,!0),r(f,"")):alert(`Erreur: ${s.error}`)}catch(c){console.error(c),alert("Erreur serveur, impossible de comparer les modèles")}finally{r(u,!1)}}}function Le(){r(t,""),r(f,""),r(p,0),r(l,0),r(g,""),r(_,""),r(N,0),r(E,0),r(M,0),r(L,0),r(h,0),r(x,0),r(k,0),r(z,0)}var $=gr(),te=o($),G=n(o(te),2),I=o(G),y=o(I);nr(y),ee(y,"maxlength",i);var ae=n(y,2),Te=o(ae);d(ae),d(I);var oe=n(I,2),P=o(oe),de=o(P),B=o(de);vr(B),ir(4),d(de),d(P);var se=n(P,2),F=o(se),S=n(F,2),Ae=o(S,!0);d(S);var T=n(S,2),je=o(T,!0);d(T),d(se),d(oe),d(G);var ne=n(G,2);{var $e=c=>{var s=fr(),w=n(o(s),2),O=o(w,!0);d(w),d(s),Q(()=>m(O,a(f))),Y(c,s)};ke(ne,c=>{a(f)&&c($e)})}var ie=n(ne,2);{var Ge=c=>{var s=_r(),w=n(o(s),2),O=o(w),me=n(o(O),2),Be=o(me,!0);d(me),d(O);var be=n(O,2),pe=n(o(be),2),Fe=o(pe,!0);d(pe),d(be),d(w);var fe=n(w,2),_e=o(fe),ge=n(o(_e)),D=o(ge),J=n(o(D)),We=o(J,!0);d(J);var q=n(J),De=o(q,!0);d(q);var xe=n(q),Je=o(xe);d(xe),d(D);var H=n(D),K=n(o(H)),qe=o(K,!0);d(K);var R=n(K),He=o(R,!0);d(R);var he=n(R),Ke=o(he);d(he),d(H);var ye=n(H),U=n(o(ye)),Re=o(U,!0);d(U);var V=n(U),Ue=o(V,!0);d(V);var we=n(V),Ve=o(we);d(we),d(ye),d(ge),d(_e),d(fe),d(s),Q((Ye,Qe,Xe)=>{m(Be,a(_)),m(Fe,a(g)),m(We,a(L)),m(De,a(M)),m(Je,`-${a(N)??""}%`),m(qe,Ye),m(He,Qe),m(Ke,`-${a(E)??""}%`),m(Re,a(x)),m(Ue,a(h)),m(Ve,`${Xe??""}%`)},[()=>a(z)?a(z).toFixed(6):"-",()=>a(k)?a(k).toFixed(6):"—",()=>a(x)&&a(h)?Math.round((a(x)-a(h))/a(x)*100):0]),Y(c,s)};ke(ie,c=>{(a(g)||a(_))&&c(Ge)})}var le=n(ie,2),W=o(le),ce=n(o(W),2),Ie=o(ce);d(ce),d(W);var ve=n(W,2),ue=n(o(ve),2),Pe=o(ue);d(ue),d(ve),d(le),d(te),d($),Q(()=>{y.disabled=a(u),m(Te,`${a(t).length??""}/4000`),B.disabled=a(u),F.disabled=a(u),S.disabled=a(t).length===0||a(u),m(Ae,a(u)?"Loading...":"Summarize"),T.disabled=a(t).length===0||a(u),m(je,a(u)?"Loading...":"Compare Models"),m(Ie,`${a(l)??""} Wh`),m(Pe,`${a(p)??""} ms`)}),br(y,()=>a(t),c=>r(t,c)),A("input",y,Ne),pr(B,()=>a(v),c=>r(v,c)),A("click",F,Le),A("click",S,Ee),A("click",T,Me),Y(e,$)}export{kr as component};
