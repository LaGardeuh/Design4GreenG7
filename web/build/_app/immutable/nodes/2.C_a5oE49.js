import{f as R,a as $}from"../chunks/BmUku4eP.js";import{N as ze,v as Te,h as T,w as Ae,x as Le,y as Me,L as Ne,z as le,A as Oe,q as ce,B as ve,e as k,C as je,D as P,F as t,G as a,I as l,J as Ge,K as s,M as Ie,O as b,P as o,t as $e}from"../chunks/DHBm8Qtv.js";import{e as z,s as p}from"../chunks/cqRR3rXU.js";import{i as ie}from"../chunks/DOmdNB8k.js";const Pe=Symbol("is custom element"),Be=Symbol("is html");function De(e){if(T){var r=!1,d=()=>{if(!r){if(r=!0,e.hasAttribute("value")){var v=e.value;J(e,"value",null),e.value=v}if(e.hasAttribute("checked")){var i=e.checked;J(e,"checked",null),e.checked=i}}};e.__on_r=d,Le(d),Me()}}function J(e,r,d,v){var i=Je(e);T&&(i[r]=e.getAttribute(r),r==="src"||r==="srcset"||r==="href"&&e.nodeName==="LINK")||i[r]!==(i[r]=d)&&(r==="loading"&&(e[Ne]=d),d==null?e.removeAttribute(r):typeof d!="string"&&Re(e).includes(r)?e[r]=d:e.setAttribute(r,d))}function Je(e){return e.__attributes??={[Pe]:e.nodeName.includes("-"),[Be]:e.namespaceURI===ze}}var ne=new Map;function Re(e){var r=e.getAttribute("is")||e.nodeName,d=ne.get(r);if(d)return d;ne.set(r,d=[]);for(var v,i=e,m=Element.prototype;m!==i;){v=Ae(i);for(var f in v)v[f].set&&d.push(f);i=Te(i)}return d}function qe(e,r,d=r){var v=new WeakSet;le(e,"input",async i=>{var m=i?e.defaultValue:e.value;if(m=B(e)?D(m):m,d(m),k!==null&&v.add(k),await Oe(),m!==(m=r())){var f=e.selectionStart,u=e.selectionEnd,_=e.value.length;if(e.value=m??"",u!==null){var g=e.value.length;f===u&&u===_&&g>_?(e.selectionStart=g,e.selectionEnd=g):(e.selectionStart=f,e.selectionEnd=Math.min(u,g))}}}),(T&&e.defaultValue!==e.value||ce(r)==null&&e.value)&&(d(B(e)?D(e.value):e.value),k!==null&&v.add(k)),ve(()=>{var i=r();if(e===document.activeElement){var m=je??k;if(v.has(m))return}B(e)&&i===D(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}function Fe(e,r,d=r){le(e,"change",v=>{var i=v?e.defaultChecked:e.checked;d(i)}),(T&&e.defaultChecked!==e.checked||ce(r)==null)&&d(e.checked),ve(()=>{var v=r();e.checked=!!v})}function B(e){var r=e.type;return r==="number"||r==="range"}function D(e){return e===""?null:+e}var He=R('<div class="bg-card border border-border rounded-lg p-4"><div class="text-sm text-muted-foreground mb-1">Résumé généré :</div> <p class="text-foreground text-lg whitespace-pre-wrap"> </p></div>'),Ke=R('<div class="grid md:grid-cols-2 gap-4"><div class="bg-card border border-border rounded-lg p-4"><div class="text-sm text-muted-foreground mb-1">Optimisé :</div> <p class="text-foreground text-lg whitespace-pre-wrap"> </p></div> <div class="bg-card border border-border rounded-lg p-4"><div class="text-sm text-muted-foreground mb-1">Non optimisé :</div> <p class="text-foreground text-lg whitespace-pre-wrap"> </p></div></div> <div class="grid grid-cols-2 gap-4 mt-4"><div class="bg-card border border-border rounded-lg p-4 text-center"><div class="text-sm text-muted-foreground mb-1">Gain en latence</div> <div class="text-2xl font-bold text-green-500"> </div></div> <div class="bg-card border border-border rounded-lg p-4 text-center"><div class="text-sm text-muted-foreground mb-1">Gain en énergie</div> <div class="text-2xl font-bold text-green-500"> </div></div></div>',1),Ue=R(`<main class="min-h-screen flex items-center justify-center p-4 bg-background"><div class="w-full max-w-4xl space-y-6"><div class="text-center space-y-2"><h1 class="text-4xl font-bold text-foreground">D4G Summarizer by Thomas, Malo, Aubin</h1> <p class="text-muted-foreground">Summarize your text under 4000 characters</p></div> <div class="bg-card border border-border rounded-xl p-6 space-y-4"><div class="relative"><textarea class="w-full h-64 p-4 border border-border rounded-lg resize-none
                    focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none
                    text-foreground placeholder:text-muted-foreground" style="background-color: rgb(var(--color-card));" placeholder="Paste your text here..."></textarea> <div class="absolute bottom-4 right-4 text-sm font-mono text-muted-foreground"> </div></div> <div class="flex flex-wrap gap-4 items-center justify-between pt-4 border-t border-border"><div class="flex flex-wrap gap-4 items-center"><label class="flex items-center gap-2 cursor-pointer"><input type="checkbox" class="hidden peer"/> <span class="w-5 h-5 rounded-full border border-gray-500 flex items-center justify-center
                            peer-checked:bg-green-500 peer-checked:border-green-500 transition-all duration-200"><svg class="w-3 h-3 text-white opacity-0 peer-checked:opacity-100 transition-opacity" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="3"><path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7"></path></svg></span> <span class="text-sm text-muted-foreground">Optimiser</span></label></div> <div class="flex gap-3"><button class="px-5 py-2 rounded-lg font-medium bg-green-700 text-white hover:bg-green-800 transition-colors">Clean</button> <button class="px-6 py-2 rounded-lg font-medium bg-green-600 text-white hover:bg-green-700 disabled:opacity-50 transition-colors"> </button> <button class="px-6 py-2 rounded-lg font-medium bg-green-500 text-white hover:bg-green-600 disabled:opacity-50 transition-colors"> </button></div></div></div> <!> <!> <div class="grid grid-cols-2 gap-4"><div class="bg-card border border-border rounded-lg p-4"><div class="text-sm text-muted-foreground mb-1">Consumption</div> <div class="text-2xl font-bold text-foreground"> </div></div> <div class="bg-card border border-border rounded-lg p-4"><div class="text-sm text-muted-foreground mb-1">Latency</div> <div class="text-2xl font-bold text-foreground"> </div></div></div></div></main>`);function Xe(e){let r=b("");const d=4e3;let v=b(!1),i=b(0),m=b(0),f=b(""),u=b(!1),_=b(""),g=b(""),S=b(0),C=b(0);function ue(c){const n=c.target;o(r,n.value,!0)}async function me(){if(!(!t(r)||t(u))){o(u,!0);try{const n=await(await fetch("/summarize",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({textToSum:t(r),optimized:t(v)})})).json();n.success?(o(f,n.results.summary,!0),o(m,n.results.latency,!0),o(i,n.results.energy_wh?Number(n.results.energy_wh.toFixed(6)):0,!0),o(_,""),o(g,""),o(S,0),o(C,0)):alert(`Erreur: ${n.error}`)}catch(c){console.error(c),alert("Erreur serveur, impossible de générer le résumé")}finally{o(u,!1)}}}async function fe(){if(!(!t(r)||t(u))){o(u,!0);try{const n=await(await fetch("/compare",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({textToSum:t(r)})})).json();n.success?(o(_,n.comparison.optimized.summary,!0),o(g,n.comparison.non_optimized.summary,!0),o(S,n.comparison.performance_gains.latency_reduction_percent,!0),o(C,n.comparison.performance_gains.energy_reduction_percent,!0),o(f,"")):alert(`Erreur: ${n.error}`)}catch(c){console.error(c),alert("Erreur serveur, impossible de comparer les modèles")}finally{o(u,!1)}}}function ge(){o(r,""),o(f,""),o(m,0),o(i,0),o(_,""),o(g,""),o(S,0),o(C,0)}var A=Ue(),q=a(A),L=l(a(q),2),M=a(L),x=a(M);Ge(x),J(x,"maxlength",d);var F=l(x,2),be=a(F);s(F),s(M);var H=l(M,2),N=a(H),K=a(N),O=a(K);De(O),Ie(4),s(K),s(N);var U=l(N,2),j=a(U),y=l(j,2),pe=a(y,!0);s(y);var E=l(y,2),_e=a(E,!0);s(E),s(U),s(H),s(L);var V=l(L,2);{var xe=c=>{var n=He(),h=l(a(n),2),w=a(h,!0);s(h),s(n),P(()=>p(w,t(f))),$(c,n)};ie(V,c=>{t(f)&&c(xe)})}var W=l(V,2);{var he=c=>{var n=Ke(),h=$e(n),w=a(h),ee=l(a(w),2),ke=a(ee,!0);s(ee),s(w);var re=l(w,2),te=l(a(re),2),Se=a(te,!0);s(te),s(re),s(h);var ae=l(h,2),I=a(ae),se=l(a(I),2),Ce=a(se);s(se),s(I);var oe=l(I,2),de=l(a(oe),2),Ee=a(de);s(de),s(oe),s(ae),P(()=>{p(ke,t(_)),p(Se,t(g)),p(Ce,`-${t(S)??""}%`),p(Ee,`-${t(C)??""}%`)}),$(c,n)};ie(W,c=>{(t(_)||t(g))&&c(he)})}var Y=l(W,2),G=a(Y),Q=l(a(G),2),ye=a(Q);s(Q),s(G);var X=l(G,2),Z=l(a(X),2),we=a(Z);s(Z),s(X),s(Y),s(q),s(A),P(()=>{x.disabled=t(u),p(be,`${t(r).length??""}/4000`),O.disabled=t(u),j.disabled=t(u),y.disabled=t(r).length===0||t(u),p(pe,t(u)?"Loading...":"Summarize"),E.disabled=t(r).length===0||t(u),p(_e,t(u)?"Loading...":"Compare Models"),p(ye,`${t(i)??""} Wh`),p(we,`${t(m)??""} ms`)}),qe(x,()=>t(r),c=>o(r,c)),z("input",x,ue),Fe(O,()=>t(v),c=>o(v,c)),z("click",j,ge),z("click",y,me),z("click",E,fe),$(e,A)}export{Xe as component};
